template Host "generic-host" {
  max_check_attempts = 3
  check_interval = 1m
  retry_interval = 30s

  check_command = "hostalive"

  /* Disk monitoring enabled by default in Agent hosts */
  vars.disks["disk"] = {
    /* No parameters. */
  }

}

/*
 * Generic template examples.
 */


/**
 * Provides default settings for hosts. By convention
 * all hosts should import this template.
 *
 * The CheckCommand object `hostalive` is provided by
 * the plugin check command templates.
 * Check the documentation for details.
 */


/**
 * Provides default settings for services. By convention
 * all services should import this template.
 */
template Service "generic-service" {
  max_check_attempts = 5
  check_interval = 1m
  retry_interval = 30s
}


/**
 * Provides settings for services whose CheckCommands need
 * to be executed on the remote Host.
 * If the host as a `ssh` agent type the CheckCommand is
 * executed through `by_ssh`, otherwise is executed locally.
 */
template Service "generic-agent-service" {
  import "generic-service"

  if (host.vars.agent_type == "ssh") {
    import "ssh-service"
  }

}

template Service "ssh-service" {
  vars.original_check_command = check_command
  check_command = "by_ssh"
  vars += get_check_command(vars.original_check_command).vars
  vars.by_ssh_command = get_check_command(vars.original_check_command).command
  vars.by_ssh_arguments = get_check_command(vars.original_check_command).arguments
  vars.by_ssh_logname = "icinga"

  // Required to match Host principals during certificate validation.
  vars.by_ssh_options = "HostKeyAlias="+host.name

}


/**
 * Provides default settings for users. By convention
 * all users should inherit from this template.
 */

template User "generic-user" {

}

/**
 * Provides default settings for host notifications.
 * By convention all host notifications should import
 * this template.
 */
template Notification "mail-host-notification" {
  command = "mail-host-notification"

  states = [ Up, Down ]
  types = [ Problem, Acknowledgement, Recovery, Custom,
            FlappingStart, FlappingEnd,
            DowntimeStart, DowntimeEnd, DowntimeRemoved ]

  vars += {
    // notification_icingaweb2url = "https://www.example.com/icingaweb2"
    // notification_from = "Icinga 2 Host Monitoring <icinga@example.com>"
    notification_logtosyslog = false
  }

  period = "24x7"
}

/**
 * Provides default settings for service notifications.
 * By convention all service notifications should import
 * this template.
 */
template Notification "mail-service-notification" {
  command = "mail-service-notification"

  states = [ OK, Warning, Critical, Unknown ]
  types = [ Problem, Acknowledgement, Recovery, Custom,
            FlappingStart, FlappingEnd,
            DowntimeStart, DowntimeEnd, DowntimeRemoved ]

  vars += {
    // notification_icingaweb2url = "https://www.example.com/icingaweb2"
    // notification_from = "Icinga 2 Service Monitoring <icinga@example.com>"
    notification_logtosyslog = false
  }

  period = "24x7"
}
